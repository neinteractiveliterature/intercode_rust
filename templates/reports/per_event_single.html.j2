{% for run in runs_by_event_id.get(event.id).cloned().unwrap_or_default() %}
{% set registration_policy = self.event_registration_policy(event) %}
<div class="page-break-after">
  <section>
    <div class="d-flex">
      <div class="col ps-0">
        <h1>
          {{ self.title_for_run(run.id) }}
        </h1>
        {% include "event_capacity.html.j2" %}
      </div>
      <div class="text-end fw-bold mt-2">
        {{ self.run_starts_at(run.id) | format_run_day_and_time }}
        <br />
        {{ self.room_names_for_run(run.id) }}
      </div>
    </div>
  </section>
  <section>
    <div class="d-flex">
      <div class="me-1">
        <strong>
          {{ self.plural_team_member_name_for_event(event) }}:
        </strong>
      </div>
      <div>
        <ul class="list-unstyled">
          {% for team_member in self.team_member_profiles_for_event(event) %}
          <li>
            {{ team_member.name() }}
          </li>
          {% endfor %}
        </ul>
      </div>
    </div>
  </section>
  {% set signup_counts = self.run_signup_counts_for_run(run) %}
  <section>
    <p class="fw-bold mb-0">
      {{ signup_counts.counted_signups_by_state("confirmed") | pluralize(" Confirmed Signup", inflector) }}

      {% if registration_policy.all_buckets().count() > 1 %}
      &mdash;
      {{ signup_counts.all_bucket_descriptions_for_state("confirmed") }}
      {% endif %}
    </p>
    <ul class="list-unstyled" style="columns: 2 auto">
      {% for (signup, user_con_profile) in self.signed_up_user_con_profiles_with_state_for_run(run, "confirmed") %}
      <li>
        {{ user_con_profile.name_inverted() }}
        {% if !signup.counted.unwrap_or(false) %}
        (not counted)
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </section>
  {# <% if signup_counts.waitlist_count> 0 %>
    <section>
      <p class="fw-bold mb-0">
        <%= pluralize signup_counts.waitlist_count, 'Waitlisted Signup' %>
          <%= '- In signup order' %>
      </p>
      <ol>
        <% waitlist_signups=signup_counts.signups_by_state_and_bucket_key['waitlisted'].values.flatten %>
          <% waitlist_signups.sort_by(&:created_at).each do |signup| %>
            <li>
              <%= signup.user_con_profile.name_inverted %>
                <% if event.registration_policy.buckets.size> 0 %>
                  (<%= event.registration_policy.bucket_with_key(signup.requested_bucket_key)&.name ||
                    signup.requested_bucket_key %>)
                    <% end %>
            </li>
            <% end %>
      </ol>
    </section>
    <% end %> #}

      {# <% available_slots=run.available_slots_by_bucket_key.values.compact.sum %>
        <% if available_slots> 0 %>
          <section>
            <p class="fw-bold">
              <%= pluralize available_slots, 'Available Slot' %>
            </p>
          </section>
          <% end %> #}
</div>
{% endfor %}
